<Button>
    background_color: (0,0,0,0)
    background_normal: ''
    back_color: (.05, .5, 1, 1)
    on_release: self.back_color = .05, .5, 1, 1
    color: (0,0,0,1)
    font_size: dp(20)
<RoundButton@Button>
    border_radius: [18]
    canvas.before:
        Color:
            rgba: self.back_color
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: self.border_radius
<BorderButton@Button>
    border_radius: dp(18)
    color: self.back_color
    canvas.before:
        Color:
            rgba: self.back_color
        Line:
            rounded_rectangle: (self.pos[0], self.pos[1], self.size[0], self.size[1], self.border_radius)
            width: 1.2
<Spinner@Button>
    border_radius: 18
    color: self.back_color
    font_size: dp(15)
    canvas.before:
        Color:
            rgba: self.back_color
        Line:
            rounded_rectangle: (self.pos[0], self.pos[1], self.size[0], self.size[1], self.border_radius)
            width: 1.2
<Label>
    font_size: dp(20)

<MyGrid>
    saf: start_and_finish
    upld: upload
    spin: port_dropdown
    instructions: instructions

    GridLayout:
        cols:1
        rows:3
        size: root.width, root.height

        GridLayout:
            canvas.before:
                Color:
                    rgba: 0,0,0,0.5
                Rectangle:
                    pos: self.pos
                    size: self.size
            size_hint_y: None
            height: root.height * 0.1
            cols:3
            GridLayout:
                cols:1
                size_hint_x: None
                width: self.parent.width * 0.25
                Image:
                    keep_ratio: True
                    allow_stretch: True
                    source: 'assets/uzh_logo.png'
            Label:
                color: 0,0,0,1
                size_hint_x: None
                width: self.parent.width * 0.50
                text: "PFC Training Dashboard"
            GridLayout:
                padding: [10,10,10,10]
                cols: 1
                width: self.parent.width * 0.25
                size_hint_x: None
                height: self.parent.height
                size_hint_y: None
                Spinner:
                    id: port_dropdown
                    #pos_hint: {'center': (.5, .5)}
                    text: 'Select device...'
                    on_press:
                        root.update_ports()
                        self.back_color = .05, .5, 1, .5
                    on_text: root.select_port(self.text)

        GridLayout:
            cols: 3
            GridLayout:
                width: root.width * 0.25
                size_hint_x: None
                rows:3
                Label:
                    height: self.parent.height * 0.45
                    size_hint_y: None
                Label:
                    height: self.parent.height * 0.45
                    size_hint_y: None
                GridLayout:
                    padding: [10,10,10,10]
                    cols: 1
                    width: root.width * 0.25
                    size_hint_x: None
                    height: self.parent.height * 0.1
                    size_hint_y: None
                    BorderButton:
                        id: reboot
                        disabled: True
                        text: 'Restart Training'
                        on_press:
                            root.reboot()
                            #self.back_color = .05, .5, 1, .5

            GridLayout:
                height: root.height * 0.9
                size_hint_y: None
                width: root.width * 0.5
                size_hint_x: None
                rows: 4
                Label:
                    height: self.parent.height * 0.1
                    size_hint_y: None
                RoundButton:
                    height: self.parent.height * 0.1
                    size_hint_y: None
                    disabled: False
                    id: start_and_finish
                    text: "Start Training"
                    on_press:
                        root.start_finish_training()
                        self.back_color = .05, .5, 1, .5
                Label:
                    id: instructions
                    height: self.parent.height * 0.5
                    size_hint_y: None
                    text: root.initialize_training()
                    color: (0, 0, 0, 1)
                RoundButton:
                    height: self.parent.height * 0.1
                    size_hint_y: None
                    disabled: True
                    id: upload
                    text: "Upload to Board"
                    on_press:
                        root.upload()
                        self.back_color = .05, .5, 1, .5
            GridLayout:
                width: root.width * 0.25
                size_hint_x: None
                rows: 2
                # Show/Hide Log checkbox
                CheckBox:
                    height: self.parent.height * 0.1
                    size_hint_y: None
                    id: chk
                    on_press: root.toggle_log(self.active)
                    color: 0.5,0.5,0.5,1

                Label:
                    width: root.width * 0.25
                    size_hint_x: None
                    height: 0
                    size_hint_y: None
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    id: log

        GridLayout:
            cols:1
            width: root.width
            size_hint_x: None
            size_hint_y: None
            height: root.height * 0.1
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.5
                Rectangle:
                    pos: self.pos
                    size: self.size

